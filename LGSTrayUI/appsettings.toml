# LGSTrayUI application settings

[UI]
# Setting related to Hardcodet NotifyIcon for WPF component
# When false renders the standard, native Windows system tray tooltip.
# When true renders a custom control. No current benefits. 
# Could remain visible when using full-screen applications.
enableRichToolTips = false

[HTTPServer]
# Enable built-in HTTP server for status and control
enabled = false

addr = "localhost"
port = 12321
useIpv6 = true

[GHub]
# Requires Logitech G-HUB to be installed and running
# Could provide mileage on devices that support it
enabled = false

[Native]
# Enable HID++ 1.0 and 2.0 protocols, most compatible
# Also works with most G series devices
enabled = true

# HID++ protocol software identifier, used for matching commands with responses
# CRITICAL for multi-user multi-instance scenarios: Each user MUST configure a different value
# Recommended: User 1 = 1, User 2 = 2, User 3 = 3, etc.
# May require tweaking in case it clashes with other Logi apps (devices not detected, wrong battery value, etc.)
# Valid range: 1-15, default: 10
softwareId = 10

# Time in seconds to next device poll on sucess
# Pooling will automatically disabled when device is event-capable
# Value is clamped between 20 and 3600 seconds
pollPeriod = 600

# List of disabled devices
# Use device name listed in menu
# disabledDevices = ["G403", "G502"]
disabledDevices = [ ]

# Keep battery polling active alongside event-driven updates
# When false (default), polling stops after first battery event (saves resources)
# When true, polling continues for validation and fallback (more reliable)
keepPollingWithEvents = false

# Delay battery event processing after device ON (in seconds)
# Prevents spurious battery readings during device wake/initialization
# Battery polls are not delayed (always processed immediately)
# Set to 0 to disable (process all events immediately)
batteryEventDelayAfterOn = 0

[Notifications]
# Enable toast style notifications
enabled = true

# Notify on device offline / online
notifyStateChange = true

# Enable/disable low battery notifications
notifyOnBatteryLow = true

# Battery percentage threshold for low battery warnings
# Additional warnings will be shown at 10% and 5%
batteryLowThreshold = 30

# Enable/disable battery charged notifications
notifyOnBatteryHigh = true

# Battery percentage threshold for "charged" notification
batteryHighThreshold = 80

# Suppress offline/online notification spam when devices switch between wired/wireless modes
# Should be left on false if you don't use such devices
# When enabled, offline notifications are delayed by modeSwitchDetectionDelaySeconds
# If device reconnects within that window, both notifications are suppressed
suppressModeSwitchNotifications = false

# Delay in seconds before showing offline notification (for mode switch detection)
# If device comes back online within this window, it's treated as a mode switch
# Recommended: 2-5 seconds for most devices
modeSwitchDetectionDelaySeconds = 3

# List of device names to apply mode switch suppression
# Empty list = apply to all devices
# Specify device names to limit suppression to specific devices (pick from device list menu)
# Example: devicesForModeSwitchSuppression = ["G502", "G515 LS TKL"]
devicesForModeSwitchSuppression = []

[Logging]
# Enable diagnostic logging to diagnostic.log
# Can be overridden by --log command-line flag
enabled = false

# Enable verbose logging (+protocol messages)
# Can be overridden by --verbose command-line flag
verbose = false

# Exponential backoff configuration for retry operations
# Each profile controls retry behavior for specific operations

[Backoff.Init]
# Device initialization retry settings
# Progressive backoff with 60s max delay cap
initialDelayMs = 1000      # 1s - delay before second attempt
maxDelayMs = 60_000        # 60s - maximum delay cap
initialTimeoutMs = 100     # 1s - timeout for first attempt
maxTimeoutMs = 5_000       # 5s - maximum timeout cap
multiplier = 2.0           # Exponential multiplier (doubling)
maxAttempts = 10           # Maximum retry attempts

[Backoff.Battery]
# Battery query retry settings
# Quick retry with lower delay cap
initialDelayMs = 0         # 0s delay on first retry
maxDelayMs = 10_000        # 10s - maximum delay cap
initialTimeoutMs = 100     # 100ms - timeout for first attempt
maxTimeoutMs = 5000        # 5s - maximum timeout cap
multiplier = 2.0           # Exponential multiplier (doubling)
maxAttempts = 3            # Quick retry (3 attempts total)

[Backoff.Metadata]
# Device metadata retrieval retry settings
# Moderate backoff for sleeping devices
initialDelayMs = 500       # 500ms - delay before second attempt
maxDelayMs = 5_000         # 5s - maximum delay cap
initialTimeoutMs = 100     # 500ms - timeout for first attempt
maxTimeoutMs = 3000        # 3s - maximum timeout cap
multiplier = 2.0           # Exponential multiplier (doubling)
maxAttempts = 5            # Moderate retry attempts

[Backoff.FeatureEnum]
# Feature enumeration retry settings
# Moderate retry for slow devices
initialDelayMs = 1000      # 1s - delay before second attempt
maxDelayMs = 5_000         # 5s - maximum delay cap
initialTimeoutMs = 100     # 1s - timeout for first attempt
maxTimeoutMs = 5000        # 5s - maximum timeout cap
multiplier = 2.0           # Exponential multiplier (doubling)
maxAttempts = 3            # Quick retry for each feature

[Backoff.Ping]
# Ping operation retry settings
# Used to wake the device before polling
# Fast retry with short timeouts
initialDelayMs = 500       # 500ms - delay before second attempt
maxDelayMs = 5000          # 5s - maximum delay cap
initialTimeoutMs = 500     # 100ms - timeout for first attempt
maxTimeoutMs = 1000        # 1s - maximum timeout cap
multiplier = 1.5           # Exponential multiplier (doubling)
maxAttempts = 5            # Multiple quick attempts

[MQTT]
# Enable MQTT integration with Home Assistant
# When enabled, battery status is published to MQTT broker with auto-discovery support
enabled = false

# MQTT broker connection settings
brokerAddress = ""		   # Broker hostname or IP address
port = 1883                # Default MQTT port (1883 for non-TLS, 8883 for TLS)
username = ""              # Leave empty for anonymous connection
password = ""              # Leave empty for anonymous connection

# Enable TLS/SSL encryption for MQTT connection (port 8883 recommended)
useTLS = false

# Home Assistant MQTT discovery settings
# Topic prefix for discovery messages (default: homeassistant)
# Discovery topics will be: {topicPrefix}/sensor/{device_id}/battery/config
topicPrefix = "homeassistant"

# Retain messages on broker (recommended for Home Assistant auto-discovery)
# Retained messages are delivered to new subscribers immediately
retainMessages = true

# Client ID (leave empty to auto-generate as LGSTrayBattery_{hostname})
clientId = ""

# Publish throttling settings
# Minimum seconds between publishes for same device
# Recommended: 60 seconds for battery updates
publishThrottleSeconds = 0

# Show toast notifications for MQTT connection failures/successes
notifyConnectionStatus = true

# Publish LWT payload to Home Assistant (default: true)
# When enabled, devices are marked as "unavailable" in HA when app is not running.
publishLWT = true